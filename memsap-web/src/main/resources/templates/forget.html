<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>INSPINIA | Forget</title>

    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet"/>

    <link th:href="@{/css/animate.css}" rel="stylesheet"/>
    <link th:href="@{/css/style.css}" rel="stylesheet"/>

    <!-- Sweet Alert -->
    <link th:href="@{/css/plugins/sweetalert/sweetalert2.min.css}" rel="stylesheet"/>

</head>

<body class="gray-bg">

<div class="middle-box text-center loginscreen animated fadeInDown">
    <div>
        <div>
            <h2 class="logo-name">WE</h2>
        </div>
        <h3>后台信息管理系统 密码找回</h3>
        <!--<p>Login in. To see it in action.</p>-->
        <form class="m-t" role="form" action="forget" method="post">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="输入注册时的手机号" name="phoneNumber" required=""/>
            </div>
            <div class="form-group">
                <input type="email" class="form-control" placeholder="输入注册时绑定的邮箱" name="email" required=""/>
            </div>
            <button id="btn" type="submit" class="btn btn-primary block full-width m-b">确 认</button>

            <a class="btn btn-sm btn-white btn-block" th:href="toLogin" href="register.html">返回登录</a>
        </form>
        <!--<p class="m-t">-->
        <!--<small>Inspinia we app framework base on Bootstrap 3 &copy; 2014</small>-->
        <!--</p>-->
    </div>
</div>

<!-- Mainly scripts -->
<script th:src="@{/js/jquery-2.1.1.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Sweet alert -->
<script th:src="@{/js/plugins/sweetalert/sweetalert2.all.min.js}"></script>

<!--<script th:inline="javascript">
    var msg = [[${msg}]];
    $(document).ready(function () {
        if (msg == 1) {
            swal({
                title: "温馨提示",
                text: "帐号不存在或邮箱不正确！"
            });
        }else{

        }
    });
</script>-->
<script th:inline="javascript">
    var msg = [[${msg}]];
    $(function () {
        var btn = $("#btn");
        btn.click(function () {
            console.log(1);
            if (msg == 1) {
                console.log(msg);
                swal({
                    title: "温馨提示",
                    text: "账号不存在或者邮箱错误",
                    type: "warning",
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "确定",
                    closeOnConfirm: false
                })
            }  else if(msg!=null && msg==0){
                let timerInterval
                Swal.fire({
                    title: '正在发送邮件！',
                    html: '请稍等',
                    timer: 2000,
                    allowOutsideClick:false,
                    onBeforeOpen: () => {
                    Swal.showLoading()
                    timerInterval = setInterval(() => {
                        Swal.getContent().querySelector('strong')
                            .textContent = Swal.getTimerLeft()
                    }, 100)
            },
                onClose: () => {
                    clearInterval(timerInterval)
                }
            }).then((result) => {
                    if (
                        // Read more about handling dismissals
                        result.dismiss === Swal.DismissReason.timer
            ) {
                    console.log('I was closed by the timer')
                }
            })
            }
        })

    })

</script>
</body>

</html>
